<html><head></head><body><div hidden="" by-polymer-bundler=""><link rel="import" href="my-firestoreinit.html"><link rel="import" href="my-firestorequery.html"></div><dom-module id="my-view2"><template><style include="sharedstyles">:host{top:92px;}</style><my-firestoreinit firestoreconfig="{{dbconfig}}" firestorelistsize="{{listsize}}" firestorecollectionhndl="{{dbhandle}}"></my-firestoreinit><my-firestorequery firestorereadconfig="{{dbreadconfig}}" firestorefetchdata="{{reqdata}}" firestoredataobject="{{dataobject}}"></my-firestorequery><div class="container" on-click="handleClick"><iron-list items="[[imagearray]]" as="item" id="itemlist" scroll-target="document" selection-enabled="" selected-item="{{selectedItem}}" grid=""><template><div class="flexchild" style="width:calc(50% - .5px);"><iron-image class="imagecontainer" sizing="cover" style="width:calc(100% - 4px); height:180px; background-color: lightgray;" preload="" fade="" src="[[item.webp]]"></iron-image></div></template></iron-list></div></template><script>var MyView2=function(_Polymer$Element){babelHelpers.inherits(MyView2,_Polymer$Element);babelHelpers.createClass(MyView2,null,[{key:"is",get:function get(){return"my-view2"}},{key:"properties",get:function get(){return{prop1:{type:String,value:"my-view2"},dbreadconfig:{type:Object,value:"null",notify:!0},reqdata:{type:Boolean,value:!1,notify:!0},dataobject:{type:Object,value:"null",observer:"processData"},dbready:{type:Boolean,value:!1,observer:"databaseReady"},dbconfig:{type:Object,value:"null",notify:!0},listsize:{type:Number,value:0,observer:"DatabaseSize"},dbhandle:{type:Object,value:"null"},imagearray:{type:Array},_viewstate:{type:Object,value:"null"}}}}]);function MyView2(){var _this;babelHelpers.classCallCheck(this,MyView2);_this=babelHelpers.possibleConstructorReturn(this,(MyView2.__proto__||Object.getPrototypeOf(MyView2)).call(this));_this._observerinit={dbready:"none",dataobject:"none",listsize:"none"};_this._viewstate={newlistsize:0,listsize:0,currentpage:0,itemsperpage:4,numberofitems:0};_this.imagearray=[];return _this}babelHelpers.createClass(MyView2,[{key:"ready",value:function ready(){babelHelpers.get(MyView2.prototype.__proto__||Object.getPrototypeOf(MyView2.prototype),"ready",this).call(this)}},{key:"loadMoreData",value:function loadMoreData(){console.log("Lucky Lucky")}},{key:"databaseReady",value:function databaseReady(){if("ready"===this._observerinit.dbready){console.log("Data base is ready");this.dbconfig={collection:"category",orderby:"sequence"}}else this._observerinit.dbready="ready"}},{key:"requestData",value:function requestData(){this.reqdata=!this.reqdata}},{key:"processData",value:function processData(){if("ready"===this._observerinit.dataobject){console.log("Process the received data"+this.dataobject.get("sequence"));var imageobject={};imageobject.webp=this.dataobject.get("webp");this.push("imagearray",imageobject);this._viewstate.numberofitems++}else this._observerinit.dataobject="ready"}},{key:"gotdatachanged",value:function gotdatachanged(){console.log("gotdata changed View1"+this.gotdata.sequence)}},{key:"handleClick",value:function handleClick(){console.log("I am clicked");this.getNextPage()}},{key:"DatabaseSize",value:function DatabaseSize(){if("ready"===this._observerinit.listsize){console.log("List Size "+this.listsize);if(0===this._viewstate.listsize){console.log("List size receive for the first tiem");console.log("DB Handle is "+this.dbhandle);this.dbreadconfig={limit:4,index:0,orderby:"sequence"};this.dbreadconfig.dbhandle=this.dbhandle;this.dbreadconfig.index=this.listsize;this._viewstate.listsize=this.listsize;this.getNextPage()}else this._viewstate.newlistsize=this._viewstate.listsize}else this._observerinit.listsize="ready"}},{key:"getNextPage",value:function getNextPage(){this.dbreadconfig.index=this._viewstate.listsize-this._viewstate.numberofitems;if(this._viewstate.listsize!=this._viewstate.numberofitems){this.requestData()}else console.log("List Complete")}}]);return MyView2}(Polymer.Element);window.customElements.define(MyView2.is,MyView2);</script></dom-module></body></html>
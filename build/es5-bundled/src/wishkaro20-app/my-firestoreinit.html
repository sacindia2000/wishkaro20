<html><head></head><body><div hidden="" by-polymer-bundler=""><script>var myglobal={firebasehandle:0,firestorehandle:0},greadstate={INIT:"INIT",DBINIT:"DBINIT",READING:"READING"};</script></div><dom-module id="my-firestoreinit"><template></template><script>var MyFirestoreInit=function(_Polymer$Element){babelHelpers.inherits(MyFirestoreInit,_Polymer$Element);babelHelpers.createClass(MyFirestoreInit,null,[{key:"is",get:function get(){return"my-firestoreinit"}},{key:"properties",get:function get(){return{prop1:{type:String,value:"firestore-init"},firestoreconfig:{type:Object,value:"null"},firestorecollectionhndl:{type:Object,value:"null",notify:!0},firestorelistsize:{type:Number,value:0,notify:!0},firestoreerror:{type:String,value:"null",notify:!0}}}},{key:"observers",get:function get(){return["configFirestore(firestoreconfig.collection)"]}}]);function MyFirestoreInit(){var _this;babelHelpers.classCallCheck(this,MyFirestoreInit);_this=babelHelpers.possibleConstructorReturn(this,(MyFirestoreInit.__proto__||Object.getPrototypeOf(MyFirestoreInit)).call(this));_this._observerinit={configFirestore:"none"};return _this}babelHelpers.createClass(MyFirestoreInit,[{key:"ready",value:function ready(){babelHelpers.get(MyFirestoreInit.prototype.__proto__||Object.getPrototypeOf(MyFirestoreInit.prototype),"ready",this).call(this)}},{key:"configFirestore",value:function configFirestore(){if("ready"===this._observerinit.configFirestore){this.initfirestore(this.firestoreconfig.collection);this.getFirestoreListSize()}else this._observerinit.configFirestore="ready"}},{key:"initfirestore",value:function initfirestore(collection){if(0===myglobal.firestorehandle){myglobal.firestorehandle=firebase.firestore()}this.firestorecollectionhndl=myglobal.firestorehandle.collection(collection);console.log("Got connection handle for collection"+collection+"Handle"+this.firestorecollectionhndl)}},{key:"getFirestoreListSize",value:function getFirestoreListSize(){myglobal.firestorehandle.collection(this.firestoreconfig.collection).orderBy(this.firestoreconfig.orderby,"desc").limit(1).onSnapshot(function(querySnapshot){querySnapshot.forEach(function(doc){console.log(" List Size: "+doc.get("sequence"));this.firestorelistsize=doc.get("sequence")}.bind(this))}.bind(this))}}]);return MyFirestoreInit}(Polymer.Element);window.customElements.define(MyFirestoreInit.is,MyFirestoreInit);</script></dom-module></body></html>